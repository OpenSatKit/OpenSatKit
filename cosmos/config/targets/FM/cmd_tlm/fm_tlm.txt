<% 
  require 'osk_config' 
  require 'osk_global'

  @APP_PREFIX_STR         = "FM"
  @HK_TLM_MID_STR         = "FM_HK_TLM_MID"
  @FILE_INFO_TLM_MID_STR  = "FM_FILE_INFO_TLM_MID"
  @DIR_LIST_TLM_MID_STR   = "FM_DIR_LIST_TLM_MID"
  @OPEN_FILES_TLM_MID_STR = "FM_OPEN_FILES_TLM_MID"
  @FREE_SPACE_TLM_MID_STR = "FM_FREE_SPACE_TLM_MID"  
  
  #TODO - Add configuration parameters
  
%>  

TELEMETRY <%= @APP_PREFIX_STR %> <%= Osk::TLM_STR_HK_PKT %> <%= Osk::Cfg.processor_endian %> "Housekeeping telemetry packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>
  APPEND_ITEM <%= Osk::TLM_STR_CMD_VLD %> 8 UINT "Application command counter"
  APPEND_ITEM <%= Osk::TLM_STR_CMD_ERR %> 8 UINT "Application command error counter"
  APPEND_ITEM SPARE           8 UINT "Placeholder for unused command warning counter"
  APPEND_ITEM NUMOPENFILES    8 UINT "Number of open files in the system"
  APPEND_ITEM CHILDCMDCOUNTER 8 UINT "Child task command counter"
  APPEND_ITEM CHILDCMDERRCOUNTER  8 UINT "Child task command error counter"
  APPEND_ITEM CHILDCMDWARNCOUNTER 8 UINT "Child task command warning counter"
  APPEND_ITEM CHILDQUEUECOUNT 8 UINT "Number of pending commands in queue"
  APPEND_ITEM CHILDCURRENTCC  8 UINT "Command code currently executing"
  APPEND_ITEM CHILDPREVIOUSCC 8 UINT "Command code previously executed"

TELEMETRY FM FILE_INFO_PKT <%= Osk::Cfg.processor_endian %> "Get File Info telemetry packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @FILE_INFO_TLM_MID_STR) %>
  APPEND_ITEM FILESTATUS  8 UINT "Status indicating whether the file is open or closed"
  APPEND_ARRAY_ITEM SPARE 8 UINT 16 "Structure padding"
  APPEND_ITEM CRC        32 UINT "CRC value if computed"
  APPEND_ITEM FILESIZE   32 UINT "File Size"
  APPEND_ITEM LASTMODIFIEDTIME 32 UINT "Last Modification Time of File"
  APPEND_ITEM FILENAME  512 STRING "Name of File"

TELEMETRY FM DIR_LIST_PKT <%= Osk::Cfg.processor_endian %> "Get Directory Listing telemetry packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @DIR_LIST_TLM_MID_STR) %>
  APPEND_ITEM DIRNAME 512 STRING "Directory Name"
  APPEND_ITEM TOTALFILES 32 UINT "Number of files in the directory"
  APPEND_ITEM PACKETFILES 32 UINT "Number of files in this packet"
  APPEND_ITEM FIRSTFILE 32 UINT "Index into directory files of first packet file"
  APPEND_ITEM FILE01_NAME 512 STRING "File Name"
  APPEND_ITEM FILE01_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE01_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE02_NAME 512 STRING "File Name"
  APPEND_ITEM FILE02_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE02_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE03_NAME 512 STRING "File Name"
  APPEND_ITEM FILE03_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE03_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE04_NAME 512 STRING "File Name"
  APPEND_ITEM FILE04_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE04_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE05_NAME 512 STRING "File Name"
  APPEND_ITEM FILE05_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE05_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE06_NAME 512 STRING "File Name"
  APPEND_ITEM FILE06_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE06_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE07_NAME 512 STRING "File Name"
  APPEND_ITEM FILE07_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE07_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE08_NAME 512 STRING "File Name"
  APPEND_ITEM FILE08_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE08_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE09_NAME 512 STRING "File Name"
  APPEND_ITEM FILE09_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE09_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE10_NAME 512 STRING "File Name"
  APPEND_ITEM FILE10_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE10_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE11_NAME 512 STRING "File Name"
  APPEND_ITEM FILE11_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE11_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE12_NAME 512 STRING "File Name"
  APPEND_ITEM FILE12_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE12_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE13_NAME 512 STRING "File Name"
  APPEND_ITEM FILE13_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE13_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE14_NAME 512 STRING "File Name"
  APPEND_ITEM FILE14_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE14_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE15_NAME 512 STRING "File Name"
  APPEND_ITEM FILE15_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE15_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE16_NAME 512 STRING "File Name"
  APPEND_ITEM FILE16_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE16_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE17_NAME 512 STRING "File Name"
  APPEND_ITEM FILE17_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE17_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE18_NAME 512 STRING "File Name"
  APPEND_ITEM FILE18_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE18_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE19_NAME 512 STRING "File Name"
  APPEND_ITEM FILE19_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE19_MOD_TIME 32 UINT "Modified time"
  APPEND_ITEM FILE20_NAME 512 STRING "File Name"
  APPEND_ITEM FILE20_SIZE 32 UINT "File size in bytes"
  APPEND_ITEM FILE20_MOD_TIME 32 UINT "Modified time"

# OS_MAX_NUM_OPEN_FILES = 50 for Linux
# OS_MAX_PATH_LEN = 64
# OS_MAX_API_NAME = 20
TELEMETRY FM OPEN_FILES_PKT <%= Osk::Cfg.processor_endian %> "Get Open Files telemetry packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @OPEN_FILES_TLM_MID_STR) %>
  APPEND_ITEM NUMOPENFILES 32 UINT   "Number of files opened via cFE"
  APPEND_ITEM FILE00_NAME 512 STRING "File name"
  APPEND_ITEM FILE00_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE01_NAME 512 STRING "File name"
  APPEND_ITEM FILE01_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE02_NAME 512 STRING "File name"
  APPEND_ITEM FILE02_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE03_NAME 512 STRING "File name"
  APPEND_ITEM FILE03_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE04_NAME 512 STRING "File name"
  APPEND_ITEM FILE04_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE05_NAME 512 STRING "File name"
  APPEND_ITEM FILE05_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE06_NAME 512 STRING "File name"
  APPEND_ITEM FILE06_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE07_NAME 512 STRING "File name"
  APPEND_ITEM FILE07_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE08_NAME 512 STRING "File name"
  APPEND_ITEM FILE08_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE09_NAME 512 STRING "File name"
  APPEND_ITEM FILE09_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE10_NAME 512 STRING "File name"
  APPEND_ITEM FILE10_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE11_NAME 512 STRING "File name"
  APPEND_ITEM FILE11_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE12_NAME 512 STRING "File name"
  APPEND_ITEM FILE12_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE13_NAME 512 STRING "File name"
  APPEND_ITEM FILE13_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE14_NAME 512 STRING "File name"
  APPEND_ITEM FILE14_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE15_NAME 512 STRING "File name"
  APPEND_ITEM FILE15_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE16_NAME 512 STRING "File name"
  APPEND_ITEM FILE16_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE17_NAME 512 STRING "File name"
  APPEND_ITEM FILE17_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE18_NAME 512 STRING "File name"
  APPEND_ITEM FILE18_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE19_NAME 512 STRING "File name"
  APPEND_ITEM FILE19_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE20_NAME 512 STRING "File name"
  APPEND_ITEM FILE20_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE21_NAME 512 STRING "File name"
  APPEND_ITEM FILE21_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE22_NAME 512 STRING "File name"
  APPEND_ITEM FILE22_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE23_NAME 512 STRING "File name"
  APPEND_ITEM FILE23_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE24_NAME 512 STRING "File name"
  APPEND_ITEM FILE24_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE25_NAME 512 STRING "File name"
  APPEND_ITEM FILE25_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE26_NAME 512 STRING "File name"
  APPEND_ITEM FILE26_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE27_NAME 512 STRING "File name"
  APPEND_ITEM FILE27_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE28_NAME 512 STRING "File name"
  APPEND_ITEM FILE28_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE29_NAME 512 STRING "File name"
  APPEND_ITEM FILE29_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE30_NAME 512 STRING "File name"
  APPEND_ITEM FILE30_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE31_NAME 512 STRING "File name"
  APPEND_ITEM FILE31_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE32_NAME 512 STRING "File name"
  APPEND_ITEM FILE32_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE33_NAME 512 STRING "File name"
  APPEND_ITEM FILE33_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE34_NAME 512 STRING "File name"
  APPEND_ITEM FILE34_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE35_NAME 512 STRING "File name"
  APPEND_ITEM FILE35_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE36_NAME 512 STRING "File name"
  APPEND_ITEM FILE36_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE37_NAME 512 STRING "File name"
  APPEND_ITEM FILE37_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE38_NAME 512 STRING "File name"
  APPEND_ITEM FILE38_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE39_NAME 512 STRING "File name"
  APPEND_ITEM FILE39_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE40_NAME 512 STRING "File name"
  APPEND_ITEM FILE40_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE41_NAME 512 STRING "File name"
  APPEND_ITEM FILE41_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE42_NAME 512 STRING "File name"
  APPEND_ITEM FILE42_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE43_NAME 512 STRING "File name"
  APPEND_ITEM FILE43_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE44_NAME 512 STRING "File name"
  APPEND_ITEM FILE44_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE45_NAME 512 STRING "File name"
  APPEND_ITEM FILE45_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE46_NAME 512 STRING "File name"
  APPEND_ITEM FILE46_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE47_NAME 512 STRING "File name"
  APPEND_ITEM FILE47_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE48_NAME 512 STRING "File name"
  APPEND_ITEM FILE48_APP  160 STRING "App that opened the file"
  APPEND_ITEM FILE49_NAME 512 STRING "File name"
  APPEND_ITEM FILE49_APP  160 STRING "App that opened the file"

TELEMETRY FM FREE_SPACE_PKT <%= Osk::Cfg.processor_endian %> "Get Free Space telemetry packet"
  <%= Osk::Cfg.tlm_hdr(@APP_PREFIX_STR, @FREE_SPACE_TLM_MID_STR) %>
  APPEND_ITEM FREE_SPACE1_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE1_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE1_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE2_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE2_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE2_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE3_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE3_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE3_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE4_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE4_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE4_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE5_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE5_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE5_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE6_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE6_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE6_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE7_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE7_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE7_NAME 512 STRING   "File System Name"
  APPEND_ITEM FREE_SPACE8_SIZE_LO32 32 UINT "Low 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE8_SIZE_HI32 32 UINT "High 32-bits of 64 bit integer"
  APPEND_ITEM FREE_SPACE8_NAME 512 STRING   "File System Name"


