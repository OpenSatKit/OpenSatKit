<% 
  require 'cfs_kit_config' 

  @APP_PREFIX_STR   = "CFE_TIME"
  @HK_TLM_MID_STR   = "CFE_TIME_HK_TLM_MID"
  @DIAG_TLM_MID_STR = "CFE_TIME_DIAG_TLM_MID"

  #TODO - Add configuration parameters
  
%>  

TELEMETRY MD HK_TLM_PKT <%= CfsKitConfig.processor_endian %> "Memory Dwell Housekeeping Telemetry"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>

TELEMETRY CFE_TIME HK_TLM_PKT LITTLE_ENDIAN "Time Services Housekeeping Packet"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>
  APPEND_ITEM CMD_VALID_COUNT 8 UINT "Time Command Execution Counter."
  APPEND_ITEM CMD_ERROR_COUNT 8 UINT "Time Command Error Counter."
  APPEND_ITEM CLOCKSTATEFLAGS 16 UINT "State Flags."
  APPEND_ITEM CLOCKSTATEAPI 16 INT "API State."
  APPEND_ITEM LEAPSECONDS 16 INT "Current Leaps Seconds."
  APPEND_ITEM SECONDSMET 32 UINT "Current MET (seconds)."
  APPEND_ITEM SUBSECSMET 32 UINT "Current MET (sub-seconds)."
  APPEND_ITEM SECONDSSTCF 32 UINT "Current STCF (seconds)."
  APPEND_ITEM SUBSECSSTCF 32 UINT "Current STCF (sub-seconds)."
  APPEND_ITEM SECONDS1HZADJ 32 UINT "Current 1 Hz SCTF adjustment (seconds)."
  APPEND_ITEM SUBSECS1HZADJ 32 UINT "Current 1 Hz SCTF adjustment (sub-seconds)."

TELEMETRY CFE_TIME DIAG_PKT BIG_ENDIAN "Time Services Diagnostics Packet"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @DIAG_TLM_MID_STR) %>
  APPEND_ITEM ATTONEMET_SECONDS 32 UINT "Number of seconds since epoch. (Parent: MET at time of tone.)"
  APPEND_ITEM ATTONEMET_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: MET at time of tone.)"
  APPEND_ITEM ATTONESTCF_SECONDS 32 UINT "Number of seconds since epoch. (Parent: STCF at time of tone.)"
  APPEND_ITEM ATTONESTCF_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: STCF at time of tone.)"
  APPEND_ITEM ATTONEDELAY_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Adjustment for slow tone detection.)"
  APPEND_ITEM ATTONEDELAY_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Adjustment for slow tone detection.)"
  APPEND_ITEM ATTONELATCH_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Local clock latched at time of tone.)"
  APPEND_ITEM ATTONELATCH_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Local clock latched at time of tone.)"
  APPEND_ITEM ATTONELEAPS 16 INT "Leap Seconds at time of tone."
  APPEND_ITEM CLOCKSTATEAPI 16 INT "Clock state as per API."
  APPEND_ITEM TIMESINCETONE_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Time elapsed since the tone.)"
  APPEND_ITEM TIMESINCETONE_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Time elapsed since the tone.)"
  APPEND_ITEM CURRENTLATCH_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Local clock latched just 'now'.)"
  APPEND_ITEM CURRENTLATCH_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Local clock latched just 'now'.)"
  APPEND_ITEM CURRENTMET_SECONDS 32 UINT "Number of seconds since epoch. (Parent: MET at this instant.)"
  APPEND_ITEM CURRENTMET_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: MET at this instant.)"
  APPEND_ITEM CURRENTTAI_SECONDS 32 UINT "Number of seconds since epoch. (Parent: TAI at this instant.)"
  APPEND_ITEM CURRENTTAI_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: TAI at this instant.)"
  APPEND_ITEM CURRENTUTC_SECONDS 32 UINT "Number of seconds since epoch. (Parent: UTC at this instant.)"
  APPEND_ITEM CURRENTUTC_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: UTC at this instant.)"
  APPEND_ITEM CLOCKSETSTATE 16 INT "Time has been 'set'."
  APPEND_ITEM CLOCKFLYSTATE 16 INT "Current fly-wheel state."
  APPEND_ITEM CLOCKSOURCE 16 INT "Internal vs external, etc."
  APPEND_ITEM CLOCKSIGNAL 16 INT "Primary vs redundant, etc."
  APPEND_ITEM SERVERFLYSTATE 16 INT "Used by clients only."
  APPEND_ITEM FORCED2FLY 16 INT "Commanded into fly-wheel."
  APPEND_ITEM CLOCKSTATEFLAGS 16 UINT "Clock State Flags."
  APPEND_ITEM ONETIMEDIRECTION 16 INT "One time STCF adjustment direction (Add = 1, Sub = 2)."
  APPEND_ITEM ONEHZDIRECTION 16 INT "1Hz STCF adjustment direction"
  APPEND_ITEM DELAYDIRECTION 16 INT "Client latency adjustment direction."
  APPEND_ITEM ONETIMEADJUST_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Previous one-time STCF adjustment.)"
  APPEND_ITEM ONETIMEADJUST_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Previous one-time STCF adjustment.)"
  APPEND_ITEM ONEHZADJUST_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Current 1Hz STCF adjustment.)"
  APPEND_ITEM ONEHZADJUST_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Current 1Hz STCF adjustment.)"
  APPEND_ITEM TONESIGNALLATCH_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Local Clock latched at most recent tone signal.)"
  APPEND_ITEM TONESIGNALLATCH_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Local Clock latched at most recent tone signal.)"
  APPEND_ITEM TONEDATALATCH_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Local Clock latched at arrival of tone data.)"
  APPEND_ITEM TONEDATALATCH_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Local Clock latched at arrival of tone data.)"
  APPEND_ITEM TONEMATCHCOUNT 32 UINT "Tone signal / data verification count."
  APPEND_ITEM TONEMATCHERRORS 32 UINT "Tone signal / data verification error count."
  APPEND_ITEM TONESIGNALCOUNT 32 UINT "Tone signal detected SB message count."
  APPEND_ITEM TONEDATACOUNT 32 UINT "Time at the tone data SB message count."
  APPEND_ITEM TONEINTCOUNT 32 UINT "Tone signal ISR execution count."
  APPEND_ITEM TONEINTERRORS 32 UINT "Tone signal ISR error count."
  APPEND_ITEM TONETASKCOUNT 32 UINT "Tone task execution count."
  APPEND_ITEM VERSIONCOUNT 32 UINT "Count of mods to time at tone reference data (version)."
  APPEND_ITEM LOCALINTCOUNT 32 UINT "Local 1Hz ISR execution count."
  APPEND_ITEM LOCALTASKCOUNT 32 UINT "Local 1Hz task execution count."
  APPEND_ITEM VIRTUALMET 32 UINT "Software MET."
  APPEND_ITEM MINELAPSED 32 UINT "Min tone signal / data pkt arrival window (Sub-seconds)."
  APPEND_ITEM MAXELAPSED 32 UINT "Max tone signal / data pkt arrival window (Sub-seconds)."
  APPEND_ITEM MAXLOCALCLOCK_SECONDS 32 UINT "Number of seconds since epoch. (Parent: Max local clock value before rollover.)"
  APPEND_ITEM MAXLOCALCLOCK_SUBSECONDS 32 UINT "Number of subseconds since epoch (LSB = 2^(-32) seconds). (Parent: Max local clock value before rollover.)"
  APPEND_ITEM TONEOVERLIMIT 32 UINT "Max between tone signal interrupts."
  APPEND_ITEM TONEUNDERLIMIT 32 UINT "Min between tone signal interrupts."
  APPEND_ITEM DATASTORESTATUS 32 UINT "Data Store status (preserved across processor reset)."
