<% 
  require 'cfs_kit_config' 

  @APP_PREFIX_STR       = "CFE_ES"
  @HK_TLM_MID_STR       = "CFE_ES_HK_TLM_MID"
  @APP_TLM_MID_STR      = "CFE_ES_APP_TLM_MID"
  @SHELL_TLM_MID_STR    = "CFE_ES_SHELL_TLM_MID"
  @MEMSTATS_TLM_MID_STR = "CFE_ES_MEMSTATS_TLM_MID"
  
  #TODO - Add configuration parameters
  
%>
TELEMETRY CFE_ES HK_TLM_PKT <%= CfsKitConfig.processor_endian %> "Housekeeping Telemetry"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @HK_TLM_MID_STR) %>
  APPEND_ITEM CMD_VALID_COUNT 8 UINT "The ES Application Command Counter."
  APPEND_ITEM CMD_ERROR_COUNT 8 UINT "The ES Application Command Error Counter."
  APPEND_ITEM CFECORECHECKSUM 16 UINT "Checksum of cFE Core Code."
  APPEND_ITEM CFEMAJORVERSION 8 UINT "Major Version Number of cFE."
  APPEND_ITEM CFEMINORVERSION 8 UINT "Minor Version Number of cFE."
  APPEND_ITEM CFEREVISION 8 UINT "Sub-Minor Version Number of cFE."
  APPEND_ITEM CFEMISSIONREVISION 8 UINT "Mission Version Number of cFE."
  APPEND_ITEM OSALMAJORVERSION 8 UINT "OS Abstraction Layer Major Version Number."
  APPEND_ITEM OSALMINORVERSION 8 UINT "OS Abstraction Layer Minor Version Number."
  APPEND_ITEM OSALREVISION 8 UINT "OS Abstraction Layer Revision Number."
  APPEND_ITEM OSALMISSIONREVISION 8 UINT "OS Abstraction Layer MissionRevision Number."
  APPEND_ITEM SYSLOGBYTESUSED 32 UINT "Total number of bytes used in system log."
  APPEND_ITEM SYSLOGSIZE 32 UINT "Total size of the system log."
  APPEND_ITEM SYSLOGENTRIES 32 UINT "Number of entries in the system log."
  APPEND_ITEM SYSLOGMODE 32 UINT "Write/Overwrite Mode."
  APPEND_ITEM ERLOGINDEX 32 UINT "Current index of the ER Log (wraps around)."
  APPEND_ITEM ERLOGENTRIES 32 UINT "Number of entries made in the ER Log since the power on."
  APPEND_ITEM REGISTEREDCOREAPPS 32 UINT "Number of Applications registered with ES."
  APPEND_ITEM REGISTEREDEXTERNALAPPS 32 UINT "Number of Applications registered with ES."
  APPEND_ITEM REGISTEREDTASKS 32 UINT "Number of Tasks ( main AND child tasks ) registered with ES."
  APPEND_ITEM REGISTEREDLIBS 32 UINT "Number of Libraries registered with ES."
  APPEND_ITEM RESETTYPE 32 UINT "Reset type ( PROCESSOR or POWERON )."
  APPEND_ITEM RESETSUBTYPE 32 UINT "Reset Sub Type."
  APPEND_ITEM PROCESSORRESETS 32 UINT "Number of processor resets since last power on."
  APPEND_ITEM MAXPROCESSORRESETS 32 UINT "Max processor resets before a power on is done."
  APPEND_ITEM BOOTSOURCE 32 UINT "Boot source ( as provided from BSP )."
  APPEND_ITEM PERFSTATE 32 UINT "Current state of Performance Analyzer."
  APPEND_ITEM PERFMODE 32 UINT "Current mode of Performance Analyzer."
  APPEND_ITEM PERFTRIGGERCOUNT 32 UINT "Number of Times Perfomance Analyzer has Triggered."
  APPEND_ITEM PERFFILTERMASK0 32 UINT "Current Setting of Performance Analyzer Filter Masks."
  APPEND_ITEM PERFFILTERMASK1 32 UINT "Current Setting of Performance Analyzer Filter Masks."
  APPEND_ITEM PERFFILTERMASK2 32 UINT "Current Setting of Performance Analyzer Filter Masks."
  APPEND_ITEM PERFFILTERMASK3 32 UINT "Current Setting of Performance Analyzer Filter Masks."
  APPEND_ITEM PERFTRIGGERMASK0 32 UINT "Current Setting of Performance Analyzer Trigger Masks."
  APPEND_ITEM PERFTRIGGERMASK1 32 UINT "Current Setting of Performance Analyzer Trigger Masks."
  APPEND_ITEM PERFTRIGGERMASK2 32 UINT "Current Setting of Performance Analyzer Trigger Masks."
  APPEND_ITEM PERFTRIGGERMASK3 32 UINT "Current Setting of Performance Analyzer Trigger Masks."
  APPEND_ITEM PERFDATASTART 32 UINT "Identifies First Stored Entry in Performance Analyzer Log."
  APPEND_ITEM PERFDATAEND 32 UINT "Identifies Last Stored Entry in Performance Analyzer Log."
  APPEND_ITEM PERFDATACOUNT 32 UINT "Number of Entries Put Into the Performance Analyzer Log."
  APPEND_ITEM PERFDATATOWRITE 32 UINT "Number of Performance Analyzer Log Entries Left to be Written to Log Dump File."
  APPEND_ITEM HEAPBYTESFREE 32 UINT "Number of free bytes remaining in the OS heap."
  APPEND_ITEM HEAPBLOCKSFREE 32 UINT "Number of free blocks remaining in the OS heap."
  APPEND_ITEM HEAPMAXBLOCKSIZE 32 UINT "Number of bytes in the largest free block."

TELEMETRY CFE_ES APP_INFO_TLM_PKT <%= CfsKitConfig.processor_endian %> "Single Application Information Packet"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @APP_TLM_MID_STR) %>
  APPEND_ITEM APPID 32 UINT "Application ID for this Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM TYPE 32 UINT "The type of App: CORE or EXTERNAL. (Parent: For more information, see CFE_ES_AppInfot.)"
  APPEND_ITEM NAME 160 STRING "The Registered Name of the Application. (Parent: For more information, see CFE_ES_AppInfot.)"
  APPEND_ITEM ENTRYPOINT 160 STRING "The Entry Point label for the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM FILENAME 512 STRING "The Filename of the file containing the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM STACKSIZE 32 UINT "The Stack Size of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM MODULEID 32 UINT "The ID of the Loadable Module for the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM ADDRESSESAREVALID 32 UINT "Indicates that the Code, Data, and BSS addresses/sizes are valid. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM CODEADDRESS 32 UINT "The Address of the Application Code Segment. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM CODESIZE 32 UINT "The Code Size of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM DATAADDRESS 32 UINT "The Address of the Application Data Segment. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM DATASIZE 32 UINT "The Data Size of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM BSSADDRESS 32 UINT "The Address of the Application BSS Segment. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM BSSSIZE 32 UINT "The BSS Size of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM STARTADDRESS 32 UINT "The Start Address of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM EXCEPTIONACTION 16 UINT "What should occur if Application has an exception (Restart Application OR Restart Processor). (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM PRIORITY 16 UINT "The Priority of the Application. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM MAINTASKID 32 UINT "The Application's Main Task ID. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM EXECUTIONCOUNTER 32 UINT "The Application's Main Task Execution Counter. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM MAINTASKNAME 160 STRING "The Application's Main Task ID. (Parent: For more information, see CFE_ES_AppInfo_t.)"
  APPEND_ITEM NUMOFCHILDTASKS 32 UINT "Number of Child tasks for an App. (Parent: For more information, see CFE_ES_AppInfo_t.)"

# TODO - CFE_ES MEM_POOL_STATS_TLM_PKT fix bitfields for little endian. Need to keep BIG_ENDIAN until fixed.
TELEMETRY CFE_ES MEM_POOL_STATS_TLM_PKT BIG_ENDIAN "Memory Pool Statistics Packet"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @MEMSTATS_TLM_MID_STR) %>
  APPEND_ITEM POOLHANDLE 32 UINT "Handle of memory pool whose stats are being telemetered."
  APPEND_ITEM POOLSTATS_POOLSIZE 32 UINT "Size of Memory Pool (in bytes). (Parent: For more info, see CFE_ES_MemPoolStats_t.)"
  APPEND_ITEM POOLSTATS_NUMBLOCKSREQUESTED 32 UINT "Number of times a memory block has been allocated. (Parent: For more info, see CFE_ES_MemPoolStats_t.)"
  APPEND_ITEM POOLSTATS_CHECKERRCTR 32 UINT "Number of errors detected when freeing a memory block. (Parent: For more info, see CFE_ES_MemPoolStats_t.)"
  APPEND_ITEM POOLSTATS_NUMFREEBYTES 32 UINT "Number of bytes never allocated to a block. (Parent: For more info, see CFE_ES_MemPoolStats_t.)"
  APPEND_ARRAY_ITEM POOLSTATS_BLOCKSTATS 96 UINT 1632 "Contains stats on each block size. (Parent: For more info, see CFE_ES_MemPoolStats_t.)"

TELEMETRY CFE_ES SHELL_TLM_PKT <%= CfsKitConfig.processor_endian %> "OS Shell Output Packet"
  <%= CfsKitConfig.tlm_hdr(@APP_PREFIX_STR, @SHELL_TLM_MID_STR) %>
  APPEND_ARRAY_ITEM SHELLOUTPUT 8 UINT 512 "ASCII text string containing output from OS Shell that was received in response to an OS Shell Command."
